name: Frase autom√°tica cada hora

on:
  schedule:
    - cron: '0 * * * *'  # Cada hora UTC
  workflow_dispatch:

jobs:
  publicar-frase:
    runs-on: ubuntu-latest

    steps:
      - name: üìÅ Checkout del repositorio
        uses: actions/checkout@v3

      - name: üêò Instalar PHP y extensiones
        run: |
          sudo apt update
          sudo apt install -y php php-mysql

      - name: üöÄ Ejecutar enviar_frase.php
        env:
          DB_HOST: ${{ secrets.DB_HOST }}
          DB_PORT: ${{ secrets.DB_PORT }}
          DB_USER: ${{ secrets.DB_USER }}
          DB_PASS: ${{ secrets.DB_PASS }}
          DB_NAME: ${{ secrets.DB_NAME }}
          PUSHOVER_TOKEN: ${{ secrets.PUSHOVER_TOKEN }}
          PUSHOVER_USER: ${{ secrets.PUSHOVER_USER }}
        run: php enviar_frase.php
